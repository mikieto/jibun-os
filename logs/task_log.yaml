---
# タスクログ (Task Log)
# このファイルには、意思決定から生まれた具体的なタスクを記録します。
# 各タスクは、進捗状況、担当者、関連する決定などを明確にします。
version: 2.0.0
tasks:
  # ======== Stage-1 : 基盤整備 =================================
  - id: TASK-001
    timestamp: '2025-07-10T10:31:00+09:00'
    related_decision: DEC-004
    summary: 三層フォルダへ移動 & imports 追記 (layer_split_migration)
    status: done
    assignee: mikieto
    description: OSのファイル構造をcommon, personal, logsの三層に物理的に移動し、関連するimportパスを修正する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: High
  - id: TASK-002
    timestamp: '2025-07-10T10:32:00+09:00'
    related_decision: DEC-004
    summary: common/personal 重複禁止 lint を追加 (layer_ci_lint_rule)
    status: todo
    assignee: mikieto
    description: CIプロセスに、commonとpersonalディレクトリ間でファイル名の重複を禁止するリンターチェックを追加する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: Medium
  - id: TASK-003
    timestamp: '2025-07-10T11:01:00+09:00'
    related_decision: DEC-005
    summary: personal/profile.yaml を作成し固定属性を集約 (profile_yaml_add)
    status: done
    assignee: mikieto
    description: OS所有者の固定的なプロフィール（名前、タイムゾーンなど）を定義するprofile.yamlをpersonalディレクトリに作成する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: Medium
  - id: TASK-004
    timestamp: '2025-07-10T11:31:00+09:00'
    related_decision: DEC-006
    summary: jibun_os.yaml から普遍憲法を抽出 (core_common_extract)
    status: done
    assignee: mikieto
    description: モノリシックだったjibun_os.yamlから、誰でも再利用可能な普遍的な原則を抽出し、common/constitution.yamlとして分離する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: High
  - id: TASK-005
    timestamp: '2025-07-10T11:32:00+09:00'
    related_decision: DEC-006
    summary: common/projects/project_template.yaml を生成 (template_seed)
    status: done
    assignee: mikieto
    description: 新規プロジェクト作成時の共通テンプレート（プレイブック）をcommon/projectsディレクトリに作成する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: High
  - id: TASK-006
    timestamp: '2025-07-10T11:33:00+09:00'
    related_decision: DEC-006
    summary: personal/projects/book_writing.yaml をテンプレから生成 (book_project_seed)
    status: done
    assignee: mikieto
    description: 書籍執筆プロジェクトの定義ファイルを、新しく作成したテンプレートから生成する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: value
    priority: Medium
  - id: TASK-007
    timestamp: '2025-07-10T12:01:00+09:00'
    related_decision: DEC-007
    summary: common & personal に domains/ を作成しテンプレ配置 (domain_folder_setup)
    status: done
    assignee: mikieto
    description: プロジェクト横断的な知識領域を管理するため、commonおよびpersonalディレクトリにdomainsフォルダとテンプレートを作成する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: Medium
  - id: TASK-008
    timestamp: '2025-07-10T13:01:00+09:00'
    related_decision: DEC-008
    summary: common/taxonomy.yaml を作成しタグを列挙 (taxonomy_file_add)
    status: done
    assignee: mikieto
    description: OS全体で共有されるタグや分類を定義するtaxonomy.yamlをcommonディレクトリに作成する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: High
  - id: TASK-009
    timestamp: '2025-07-10T09:31:00+09:00'
    related_decision: DEC-002
    summary: KPIシートに『収益／社会貢献』列を追加 (kpi_sheet_add_profit_col)
    status: todo
    assignee: mikieto
    description: プロジェクトの価値を測定するため、KPI管理シートに収益性や社会貢献度を測るための列を追加する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: value
    priority: Medium
  - id: TASK-010
    timestamp: '2025-07-10T09:32:00+09:00'
    related_decision: DEC-002
    summary: ci/security_lint.yml に G009 静的解析ジョブを追加 (ci_add_g009_lint)
    status: done
    assignee: mikieto
    description: 倫理的・社会的文脈ガード（G009）をCIプロセスに組み込み、自動的にチェックする。
    scope:
      project: os_platform_v1
      stage: 1
      domain: security
    priority: High
  - id: TASK-011
    timestamp: '2025-07-10T14:31:00+09:00'
    related_decision: DEC-011
    summary: ルート core_principles.yaml の退役を確認 (core_root_remove)
    status: done
    assignee: mikieto
    description: リファクタリングに伴い不要となった、リポジトリルートの旧core_principles.yamlを削除する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: observability
    priority: Medium
  - id: TASK-012
    timestamp: '2025-07-10T15:01:00+09:00'
    related_decision: DEC-012
    summary: OS全体を『共通フレームワーク』と『個人実装』に分離するリファクタリング (os_refactor_for_reusability)
    status: done
    assignee: mikieto
    description: OSの再利用性を高めるため、大規模なリファクタリングを実施する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: Critical
  - id: TASK-013
    timestamp: '2025-07-10T16:01:00+09:00'
    related_decision: DEC-014
    summary: OSのファイル構造と役割を定義するcommon/system_map.yamlを作成 (system_map_creation)
    status: done
    assignee: mikieto
    description: AIがOSの構造を機械的に理解できるようにするため、system_map.yamlを作成する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: Critical
  - id: TASK-014
    timestamp: '2025-07-10T16:31:00+09:00'
    related_decision: DEC-015
    summary: 書籍プロジェクトのdecision-log.mdを共通/個人要素に分離・統合 (book_project_refactor_split)
    status: done
    assignee: mikieto
    description: 書籍プロジェクトの意思決定ログを、普遍的な原則とプロジェクト固有の要素に分離する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: High
  - id: TASK-015
    timestamp: '2025-07-10T17:01:00+09:00'
    related_decision: DEC-016
    summary: developブランチでのYAML検証CIを有効にする (ci_develop_validation_enable)
    status: done
    assignee: mikieto
    description: .github/workflows/validate.yamlを修正し、developブランチでの品質を早期に保証する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: High
  - id: TASK-016
    timestamp: '2025-07-10T17:31:00+09:00'
    related_decision: DEC-017
    summary: AIへのベースコンテキストを自動生成するスクリプトを作成 (create_base_os_context_script)
    status: done
    assignee: mikieto
    description: scripts/get_base_os_context.pyを作成し、AIへのコンテキスト供給を自動化する。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: High
  - id: TASK-017
    timestamp: '2025-07-10T18:01:00+09:00'
    related_decision: DEC-018
    summary: system_map.yamlにcontext_levelフィールドを追加 (update_system_map_with_context_level)
    status: done
    assignee: mikieto
    description: 各ファイルのコンテキストレベルを定義し、AIコンテキスト生成の動的なロードを可能にする。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: High
  - id: TASK-018
    timestamp: '2025-07-10T18:02:00+09:00'
    related_decision: DEC-018
    summary: AIコンテキスト生成スクリプトをsystem_map.yamlから動的にロードするよう修正 (update_base_os_context_script)
    status: done
    assignee: mikieto
    description: scripts/get_base_os_context.pyを修正し、system_map.yamlを唯一の信頼できる情報源とする。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: Critical
  - id: TASK-019
    timestamp: '2025-07-10T18:31:00+09:00'
    related_decision: DEC-019
    summary: 書籍プロジェクト定義ファイルを本執筆リポジトリへ移動 (move_lean_data_book_to_repo)
    status: done
    assignee: mikieto
    description: personal/projects/lean_data_engineering_book.yamlを専用リポジトリへ移動し、プロジェクトの自己完結性を高める。
    scope:
      project: os_platform_v1
      stage: 1
      domain: quality
    priority: High

  # ======== Stage-2 : 自動品質保証 ==============================
  - id: TASK-020
    timestamp: '2025-07-11T09:00:00+09:00'
    related_decision: DEC-XXX  # workflow_simplification_20250710 に対応する決定ID
    summary: pre-commitフックでyamllint/schema/secret-scanを強制 (precommit_hook_setup)
    status: todo
    assignee: mikieto
    description: コミット前に自動的に品質とセキュリティをチェックする仕組みを導入する。
    scope:
      project: os_platform_v1
      stage: 2
      domain: security
    priority: Critical

  # ======== Stage-3 : 可視化 & インサイト =======================
  - id: TASK-021
    timestamp: '2025-07-11T10:00:00+09:00'
    related_decision: DEC-XXX  # workflow_simplification_20250710 に対応する決定ID
    summary: prompt_tokensを計測しGuard Logに自動書込み (token_meter_script)
    status: todo
    assignee: mikieto
    description: AIとの対話で消費したトークン量を計測し、コスト管理と利用状況の可視化を行う。
    scope:
      project: os_platform_v1
      stage: 3
      domain: observability
    priority: Medium
  - id: TASK-022
    timestamp: '2025-07-11T11:00:00+09:00'
    related_decision: DEC-013  # v3_arch_feedback_adopt
    summary: 週次で外部情報取得→Impact Issue自動生成PoC (horizon_scan_poc)
    status: todo
    assignee: mikieto
    description: 機会発見エンジン（Opportunity Engine）の概念実証として、外部情報をスキャンし、影響のありそうなIssueを自動起票する。
    scope:
      project: os_platform_v1
      stage: 3
      domain: speed
    priority: High
  - id: TASK-023
    timestamp: '2025-07-11T12:00:00+09:00'
    related_decision: DEC-013  # v3_arch_feedback_adopt
    summary: docs/フォルダをセットアップし、初見者の体験を向上 (docs_folder_setup)
    status: todo
    assignee: mikieto
    description: OS公開に向け、ドキュメントを整備するための基盤を構築する。
    scope:
      project: os_platform_v1
      stage: 3
      domain: observability
    priority: High
# --- 他のStageのタスクも同様に変換 ---
